#%DDDML 0.1

---

# ------------------------------
aggregates:

    # --------------- aggregate ---------------
    # 仓库
    Warehouse:
      
      id:
        name: WarehouseId
        type: string

      properties:

        WarehouseName:
          type: string
          
        Description:
          type: string

        IsInTransit:
          type: bool
          
        #c_location_id numeric(10,0) NOT NULL,

        #Separator # character(1) NOT NULL,

        #m_warehousesource_id numeric(10,0),

        #replenishmentclass character varying(60),

          
    # --------------- aggregate ---------------
    # 货位
    Locator:

      id:
        name: LocatorId
        type: string

      properties:

        WarehouseId:
          type: string
          notNull: true

        ParentLocatorId:
          type: string

        LocatorType:
          type: string

        PriorityNumber:
          type: string

        IsDefault:
          type: bool

        X:
          type: string

        Y:
          type: string

        Z:
          type: string

        Description:
          type: string
          
      # ------------------------------------------
      constraints:
        # ----------------------------------------
        LocatorIdConstraint:
          validationLogic:
            CSharp: "{this}.LocatorId.StartsWith({this}.WarehouseId)"
            Java: "getLocatorId().startsWith(getWarehouseId())"

            
# -------------------------------------

trees:
    
    # 货位树
    LocatorTree:
    
      nodeContentType: Locator
      
      parentId: ParentLocatorId
      
      rootParentIdValues: [null, ""]
        
        
          