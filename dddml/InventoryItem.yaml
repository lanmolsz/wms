#%DDDML 0.1

---

# ------------------------------
aggregates:

    # --------------- aggregate ---------------
    InventoryItem:
      
      id:
        name: InventoryItemId
        type: InventoryItemId

      properties:
      
        QuantityOnHand:
          type: decimal
        QuantityReserved:
          type: decimal
        QuantityOccupied:
          type: decimal
        QuantityVirtual:
          type: decimal
        
        Entries:
          itemType: InventoryItemEntry
      
      reservedProperties:
        noActive: true
        noDeleted: true
      
      entities:
      
        # --------------- 库存事务 / 分录 ------------------
        InventoryItemEntry:
          immutable: True
          
          id:
            name: EntrySeqId
            type: long
            
          properties:
          
            QuantityOnHand:
              type: decimal
            QuantityReserved:
              type: decimal
            QuantityOccupied:
              type: decimal
            QuantityVirtual:
              type: decimal
            
            Source:
              type: InventoryItemSourceVO
              notNull: true
          
          
      # ---------------- Value Objects -------------------
      valueObjects:
      
        # ----------------------------------
        InventoryItemId:
          properties:
            ProductId:
              type: string
              columnName: ProductId
            LocatorId: 
              type: string
              columnName: LocatorId
            AttributeSetInstanceId:
              type: string
              columnName: AttributeSetInstanceId
        
        # -----------------------------------
        InventoryItemSourceVO:
          properties:
            InventoryItemEventTypeId:
              type: string
              referenceType: InventoryItemEventType
              notNull: true
              columnName: InventoryItemEventTypeId
            DocumentNumber:
              type: string
              notNull: true
              columnName: DocumentNumber
            LineNumber:
              type: string
              columnName: LineNumber
            
    # ----------------------- aggregate -------------------------
    InventoryItemEventType:
      id:
        name: InventoryItemEventTypeId
        type: string
      properties:
        Description:
          type: string
          notNull: true
          
          
          