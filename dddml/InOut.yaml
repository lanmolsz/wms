#%DDDML 0.1

---
          
# ------------------------------
aggregates:

    # --------------- aggregate ---------------
    InOut:

      id:
        name: DocumentNumber
        type: string

      properties:

        # IsSOTransaction:
          # type: bool

        # --------------------------------------
        DocumentStatusId:
          type: string
          commandType: DocumentAction
          commandName: DocumentAction
          stateMachine:
            transitions:
            - sourceState: "Drafted"
              trigger: "Complete"
              targetState: "Completed"
            - sourceState: "Drafted"
              trigger: "Void"
              targetState: "Voided"
            - sourceState: "Completed"
              trigger: "Close"
              targetState: "Closed"
            - sourceState: "Completed"
              trigger: "Reverse"
              targetState: "Reversed"
        # --------------------------------------

        Posted:
          type: bool

        Processed:
          type: bool 

        Processing:
          type: string

        DocumentTypeId:
          referenceType: DocumentType

        Description:
          type: string

        OrderId:
          type: string

        DateOrdered:
          type: DateTime?

        IsPrinted:
          type: bool
        
        # 出入库类型
        MovementTypeId:
          type: string
          referenceType: MovementType

        MovementDate:  
          type: DateTime?

        BusinessPartnerId:
          type: string

        WarehouseId:
          type: string

        POReference:
          type: string

        FreightAmount:
          # type: Money
          type: decimal

        ShipperId:
          type: string
          
        ChargeAmount:
          # type: Money
          type: decimal

        DatePrinted:
          type: DateTime?

        CreatedFrom:
          type: string
          
        SalesRepresentativeId:
          type: string

        NumberOfPackages:
          type: int
          
        PickDate:
          type: DateTime?
          
        ShipDate:
          type: DateTime?
          
        TrackingNumber:
          type: string

        DateReceived:
          type: DateTime?
          
        IsInTransit:
          type: bool

        IsApproved:
          type: bool 
        
        IsInDispute:
          type: bool

        # Volume:
          # type: decimal
          
        # Weight:
          # type: decimal

        # IsDropShip:
          # type: bool
        # DropShipBusinessPartnerId:
          # type: string
          
        RmaDocumentNumber: 
          type: string

        ReversalDocumentNumber:
          type: string
          
        #dateacct timestamp without time zone NOT NULL,
        #deliveryrule character(1) NOT NULL,
        #freightcostrule character(1) NOT NULL,
        #deliveryviarule character(1) NOT NULL,
        #priorityrule character(1) NOT NULL,
        #c_invoice_id numeric(10,0),
        #string GenerateTo
        #sendemail character(1) NOT NULL DEFAULT 'N'::bpchar,
        #ad_user_id numeric(10,0),
        #ad_orgtrx_id numeric(10,0),
        #c_project_id numeric(10,0),
        #c_campaign_id numeric(10,0),
        #c_activity_id numeric(10,0),
        #user1_id numeric(10,0),
        #user2_id numeric(10,0),
        #ref_inout_id numeric(10,0),
        #createconfirm character(1),
        #createpackage character(1),
        #dropship_location_id numeric(10,0),
        #dropship_user_id numeric(10,0),
        #processedon numeric,
        #string TerminalReference:
        
        InOutLines:
          itemType: InOutLine
        
      reservedProperties:
        noDeleted: true
        
      entities:
          
        InOutLine:
          
          id: 
            name: LineNumber
            type: string
            #name: SkuId
            #type: SkuId
              
          properties:  

            LocatorId:
              type: string

            ProductId:
              type: string

            AttributeSetInstanceId:
              type: string

            Description:
              type: string

            # IsDescription:
              # type: bool

            QuantityUomId:
              type: string

            MovementQuantity: 
              type: decimal

            # ConfirmedQuantity: 
              # type: decimal

            # ScrappedQuantity: 
              # type: decimal

            # TargetQuantity: 
              # type: decimal

            PickedQuantity: 
              type: decimal

            IsInvoiced: 
              type: bool

            Processed: 
              type: bool

            # QuantityEntered: 
              # type: decimal

            RmaLineNumber: 
              type: long

            ReversalLineNumber:
              type: long
                
            #c_charge_id numeric(10,0),
            #c_project_id numeric(10,0),
            #c_projectphase_id numeric(10,0),
            #c_projecttask_id numeric(10,0),
            #c_campaign_id numeric(10,0),
            #c_activity_id numeric(10,0),
            #user1_id numeric(10,0),
            #user2_id numeric(10,0),
            #ad_orgtrx_id numeric(10,0),
            #m_rmaline_id numeric(10,0),
    
    
      # --------------------------------------------
      methods:
      
        Complete:
          parameters:
        
        Close:
          parameters:
          
        Void:
          parameters:
          
        Reverse:
          parameters:
          
          